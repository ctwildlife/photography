<script>
const slideshow = document.getElementById("slideshow");
let images = [];
let captions = [];
let index = 0;

// Load recent photos JSON with captions
fetch('/recent_photos.json')
  .then(response => response.json())
  .then(data => {
    if (data.length === 0) return;

    images = data.map(item => item.src);
    captions = data.map(item => item.caption);

    // Initialize first image & caption
    slideshow.src = images[0];
    slideshow.alt = captions[0];

    const captionEl = document.createElement("div");
    captionEl.id = "slideshow-caption";
    captionEl.style.textAlign = "center";
    captionEl.style.marginTop = "10px";
    captionEl.style.fontStyle = "italic";
    captionEl.innerText = captions[0];
    slideshow.parentNode.appendChild(captionEl);

    // Start slideshow
    setInterval(() => {
      index = (index + 1) % images.length;
      slideshow.src = images[index];
      slideshow.alt = captions[index];
      captionEl.innerText = captions[index];
    }, 5000);
  })
  .catch(err => console.error("Error loading recent photos JSON:", err));
</script>
